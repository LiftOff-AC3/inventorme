version: 1
backend:
  phases:
    # IMPORTANT - Please verify your build commands
    build:
      commands:
        - '# Execute Amplify CLI with the helper script'
        - amplifyPush --simple
  artifacts:
    baseDirectory: build/libs/
    files:
      - '**/*'
  cache:
    paths:
      - ~/.gradle/wrapper
      - ~/.gradle/caches
frontend:
  phases:
    build:
      commands:
        - npm ci
        - npm run build
  artifacts:
    # IMPORTANT - Please verify your build output directory
    baseDirectory: build
    files:
      - '**/*'
  cache:
    paths:
      - 'node_modules/**/*'
    rewriteDirectories:
      - from: </^[^.]+$|\.(?!(css|gif|ico|jpg|js|png|txt|svg|woff|ttf)$)([^.]+$)/>
      - to: /index.html
